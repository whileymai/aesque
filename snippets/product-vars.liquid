{%- comment -%}
{%- endcomment -%}
{%- comment -%} ### General ### {%- endcomment -%}

{%- if product.has_only_default_variant -%}
    {%- assign loc-prd = product.variants.first -%}
{%- else -%}
    {%- if product.first_available_variant -%}
        {%- assign loc-prd = product.first_available_variant -%}
    {%- else -%}
        {%- assign loc-prd = product.variants.first -%}
    {%- endif -%}

    {%- assign loc-prd-selected = product.selected_variant -%}
{%- endif -%}

{%- assign loc-image = product.images[0] -%}

{%- if loc-prd-selected -%}
    {%- assign loc-id = loc-prd-selected.id -%}
    {%- assign loc-url = loc-prd-selected.url -%}
    {%- assign loc-price = loc-prd-selected.price -%}
    {%- assign loc-compare_at_price = loc-prd-selected.compare_at_price -%}
    {%- assign loc-available = loc-prd-selected.available -%}
    {%- assign log-options-selected = loc-prd-selected.options -%}
{%- else -%}
    {%- assign loc-id = loc-prd.id -%}
    {%- assign loc-url = loc-prd.url -%}
    {%- assign loc-price = loc-prd.price -%}
    {%- assign loc-compare_at_price = loc-prd.compare_at_price -%}
    {%- assign loc-available = loc-prd.available -%}
    {%- assign log-options-selected = loc-prd.options -%}
{%- endif -%}

{%- assign loc-handle = product.handle -%}
{%- assign loc-title = product.title -%}
{%- assign loc-description = product.description -%}
{%- assign loc-variants = product.variants -%}
{%- assign loc-ato = product.metafields.ato -%}

{%- if loc-variants.size and product.options_with_values.first.values.first != 'Default Title' -%}
    {%- assign loc-has_options = true -%}
{%- else -%}
    {%- assign loc-has_options = false -%}
{%- endif -%}


{%- assign loc-prd-id = product.id -%}

{%- if settings.prd-btns_action == 'toggle' -%}
    {%- assign res-btn_card_action = ' prdbut__cart-toggle' -%}
{%- elsif settings.prd-btns_action == 'add' -%}
    {%- assign res-btn_card_action = ' prdbut__cart-add' -%}
{%- endif -%}